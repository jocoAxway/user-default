/**
 * A JSON parsable error object with message and optional stack
 * to return from the error output of the flow-node
 */
class NodeError extends Error {
	/**
	 * Error or error message
	 * @param {Error|string} error - The error
	 */
	constructor(error) {
		if (error instanceof Error) {
			super(error.message);
			this.stack = error.stack;
		} else {
			super(error);
		}
	}

	/**
	 * By default Error objects JSON stringify as '{}'. We want the error and stack to be visible
	 * @returns {object} JSON object with `message` and `stack`.
	 */
	toJSON() {
		return { message: this.message, stack: this.stack };
	}
}
module.exports = NodeError;
