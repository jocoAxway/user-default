const APIProvider = require('../APIProvider');
const ProjectSummary = require('./ProjectSummary');

/**
 * API for interacting with the Project.
 * @public
 */
class ProjectAPI extends APIProvider {
	/**
	 * Bind the paths to the controller methods.
	 *
	 * @param {ProjectController} controller - The main controller providing the
	 *                                         implementation for this API.
	 */
	static bind(controller) {
		const swagger = controller.ctx.swagger;

		swagger
			.schema('ProjectSummary', ProjectSummary.schema)
			.get('/project/summary')
			.operationId('getProjectSummary')
			.tag('project')
			.summary('Get the service summary.')
			.response(200, 'OK', 'ProjectSummary')
			.response(500)
			.action(
				(req, res) => {
					controller.getSummary()
						.then(
							summary => {
								res.status(200).send(summary);
							}
						)
						.catch(err => {
							APIProvider.handleError(err, res, 500);
						});
				});
	}
}

exports = module.exports = ProjectAPI;
