const APIProvider = require('../APIProvider'),
	Connector = require('./schema/Connector');

class ConnectorsAPI extends APIProvider {
	static bind(controller) {
		const swagger = controller.ctx.swagger;

		swagger
			.schema('Connector', Connector.schema);

		swagger
			.get('/connectors')
			.operationId('getConnectors')
			.tag('connectors')
			.summary('Gets an array of installed connectors')
			.response(200, 'OK', 'Connector', true)
			.response(500)
			.action((req, res) => {
				controller.getConnectors()
					.then(connectors => {
						res.status(200).send(connectors);
					})
					.catch(err => {
						APIProvider.handleError(err, res, 500);
					});
			});
	}
}

exports = module.exports = ConnectorsAPI;
